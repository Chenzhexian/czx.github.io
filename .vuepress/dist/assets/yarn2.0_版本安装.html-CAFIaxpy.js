import{_ as t,r as l,o,c as r,a as e,b as n,d as c,e as a}from"./app-CzSBTTj3.js";const p={},i=a('<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言"><span>前言</span></a></h2><p>先说说为什么需要yarn2.0+版本，因为我的项目中用到了vuepress-plugin-comment2这个插件，这个插件需要yarn2.0+版本才能安装成功。</p><p><img src="https://czxcab.cn/file/docs/yarn1.jpg" alt=""></p><p>根据图中提示，我们需要安装yarn2.0+版本。</p><h2 id="安装nodejs" tabindex="-1"><a class="header-anchor" href="#安装nodejs"><span>安装nodejs</span></a></h2><p>其实nodejs已经安装过了，只不过我在升级yarn2.0+版本的时候，老不成功也找不到原因，所以这里直接重新安装nodejs。</p>',6),d={href:"https://nodejs.org/en",target:"_blank",rel:"noopener noreferrer"},h=a(`<h3 id="下载安装nodejs" tabindex="-1"><a class="header-anchor" href="#下载安装nodejs"><span>下载安装nodejs</span></a></h3><p>进入官网后，我们选择左边这个稳定版本，下载nodejs。</p><p><img src="https://czxcab.cn/file/docs/yarn2.jpg" alt=""></p><p>下载完后点击安装，一路下一步即可。如果之前安装过nodejs，把之前的文件夹删除即可。</p><p>安装完成后，打开cmd命令窗口，输入node -v，如果显示版本号，则说明安装成功。</p><p><img src="https://czxcab.cn/file/docs/yarn3.jpg" alt=""></p><h3 id="相关配置" tabindex="-1"><a class="header-anchor" href="#相关配置"><span>相关配置</span></a></h3><p>更换npm源，因为npm的源在国外，下载速度很慢。我们换成淘宝的源。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> config <span class="token builtin class-name">set</span> registry https://registry.npm.taobao.org
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后我们再nodejs的文件夹下创建两个文件夹，<code>node_global</code>和<code>node_cache</code>，分别用来存放全局安装的包和缓存。</p><p><img src="https://czxcab.cn/file/docs/yarn4.jpg" alt=""></p><p>创建完两个文件夹之后，打开命令行界面，输入下面命令</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#prefix = 创建的node_global文件夹所在路径</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> prefix <span class="token string">&quot;D:<span class="token entity" title="\\n">\\n</span>odejs<span class="token entity" title="\\n">\\n</span>ode_global&quot;</span>

<span class="token comment">#cache = 创建的node_cache文件夹所在路径</span>
<span class="token function">npm</span> config <span class="token builtin class-name">set</span> cache <span class="token string">&quot;D:<span class="token entity" title="\\n">\\n</span>odejs<span class="token entity" title="\\n">\\n</span>ode_cache&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://czxcab.cn/file/docs/yarn5.jpg" alt=""></p><p>如果之前安装过nodejs,重新配置：删除<code>C:\\Users\\yi081\\.npmrc</code>文件重新生成。如果 .npmrc 不在这个目录下，就 C 盘全局搜一下。</p><h3 id="环境变量" tabindex="-1"><a class="header-anchor" href="#环境变量"><span>环境变量</span></a></h3><p>在系统变量下新建<code>NODE_PATH</code>，输入<code>D:\\nodejs\\node_modules</code>。</p><p><img src="https://czxcab.cn/file/docs/yarn6.jpg" alt=""></p><p>然后在path中添加<code>D:\\nodejs\\node_global</code>。</p><p><img src="https://czxcab.cn/file/docs/yarn7.jpg" alt=""></p><h2 id="安装yarn" tabindex="-1"><a class="header-anchor" href="#安装yarn"><span>安装yarn</span></a></h2><p>安装完nodejs后，我们就可以安装yarn了，打开DOS命令窗口，输入下面命令进行安装：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment">#这个是安装yarn2.0+版本</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> yarn@berry

<span class="token comment">#这个是安装yarn1.0版本</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> <span class="token function">yarn</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输入命令我们会看到下面的报错，这是因为我们的文件夹权限不够，我们需要把文件夹的权限修改一下 。</p><p><img src="https://czxcab.cn/file/docs/yarn8.jpg" alt=""></p><p>我们找到刚刚新建的<code>node_cache</code>和<code>node_global</code>文件夹，右键属性，点击安全，点击编辑，点击完全控制然后确认。</p><p><img src="https://czxcab.cn/file/docs/yarn9.jpg" alt=""></p><p>我们再输入命令，安装成功。输入<code>yarn -v</code>出现版本号，则说明安装成功。</p><p><img src="https://czxcab.cn/file/docs/yarn10.jpg" alt=""></p><p>运行以下命令，将 Yarn 2 设置为默认版本：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token builtin class-name">set</span> version berry
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这里回去github上下载yarn2.0+的js文件，下载速度很慢，所以我们可以直接复制链接到游览器,然后复制代码到本地进行修改。</p><p><img src="https://czxcab.cn/file/docs/yarn11.jpg" alt=""></p>`,33),m={href:"https://github.com/yarnpkg/berry/raw/master/packages/yarnpkg-cli/bin/yarn.js",target:"_blank",rel:"noopener noreferrer"},g=a('<p>然后找到<code>D:\\nodejs\\node_global\\node_modules\\yarn\\bin</code>文件夹，找到<code>yarn.js</code>文件,直接把刚刚复制的js覆盖掉<code>yarn.js</code>。</p><p>然后重新执行<code>yarn set version berry</code>命令，将 Yarn 2 设置为默认版本。</p><p><img src="https://czxcab.cn/file/docs/yarn12.jpg" alt=""></p><p>最后重新进入项目，输入<code>yarn install</code>安装依赖。</p><p>成功安装依赖没有报错，启动项目，速度非常快！</p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>这个过程其实很简单，但是网上很多教程都是基于yarn1.0版本，所以安装的时候会遇到一些坑。 还有一点就是，安装的时候，<code>yarn set version berry</code>命令一直报错，其实是一样网络的问题，我们只需要把<code>yarn.js</code>文件下载下来，然后覆盖掉<code>yarn.js</code>就可以了。</p>',7);function b(u,y){const s=l("ExternalLinkIcon");return o(),r("div",null,[i,e("p",null,[n("nodejs官网："),e("a",d,[n("https://nodejs.org/en"),c(s)])]),h,e("p",null,[n("复制链接 "),e("a",m,[n("https://github.com/yarnpkg/berry/raw/master/packages/yarnpkg-cli/bin/yarn.js"),c(s)]),n(" 到游览器，下载yarn2.0+的js文件。")]),g])}const j=t(p,[["render",b],["__file","yarn2.0_版本安装.html.vue"]]),_=JSON.parse('{"path":"/docs/technicalDocument/%E9%83%A8%E7%BD%B2%E7%9B%B8%E5%85%B3/yarn2.0_%E7%89%88%E6%9C%AC%E5%AE%89%E8%A3%85.html","title":"yarn2.0+版本安装","lang":"zh-CN","frontmatter":{"title":"yarn2.0+版本安装"},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"安装nodejs","slug":"安装nodejs","link":"#安装nodejs","children":[{"level":3,"title":"下载安装nodejs","slug":"下载安装nodejs","link":"#下载安装nodejs","children":[]},{"level":3,"title":"相关配置","slug":"相关配置","link":"#相关配置","children":[]},{"level":3,"title":"环境变量","slug":"环境变量","link":"#环境变量","children":[]}]},{"level":2,"title":"安装yarn","slug":"安装yarn","link":"#安装yarn","children":[]},{"level":2,"title":"总结","slug":"总结","link":"#总结","children":[]}],"git":{"updatedTime":1715061248000,"contributors":[{"name":"czx","email":"2504058202@qq.com","commits":1}]},"filePathRelative":"docs/technicalDocument/部署相关/yarn2.0+版本安装.md"}');export{j as comp,_ as data};
